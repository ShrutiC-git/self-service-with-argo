apiVersion: apps/v1
kind: Deployment
metadata: {
    name: checkout-service,
    labels: {
        app: checkout-service
    }
}
spec: 
    replicas: 2
    selector: {
        matchLabels: {
            app: checkout-service
        }
    }
    template: 
        metadata: {
            labels: {
                app: checkout-service
            }
        }
        spec: 
            serviceAccountName: dev-sa
            containers: 
            -   name: checkout-service
                image: placeholder # Use a stable, generic placeholder
                ports: [
                    {
                        containerPort: 8080
                    }
                ]
                resources: {
                    requests: {
                        memory: __MEMORY_REQUEST__,
                        cpu: __CPU_REQUEST__
                    },
                    limits: {
                        memory: __MEMORY_LIMIT__,
                        cpu: __CPU_LIMIT__
                    }
                }
                env: 
                - {
                    name: RABBITMQ_HOST,
                    value: rabbitmq.messaging.svc.cluster.local
                }
    